{
  "version": "5",
  "dialect": "mysql",
  "id": "0bc3a7c2-bea5-46fd-b2f7-d0b860c77a30",
  "prevId": "2c4f77c8-8e59-4379-b3c2-4beb0ea0263f",
  "tables": {
    "article_tags": {
      "name": "article_tags",
      "columns": {
        "id": {
          "name": "id",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": true
        },
        "articleId": {
          "name": "articleId",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "tagId": {
          "name": "tagId",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "article_tags_article_id_idx": {
          "name": "article_tags_article_id_idx",
          "columns": [
            "articleId"
          ],
          "isUnique": false
        },
        "article_tags_tag_id_idx": {
          "name": "article_tags_tag_id_idx",
          "columns": [
            "tagId"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "article_tags_article_id_fk": {
          "name": "article_tags_article_id_fk",
          "tableFrom": "article_tags",
          "tableTo": "articles",
          "columnsFrom": [
            "articleId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "article_tags_tag_id_fk": {
          "name": "article_tags_tag_id_fk",
          "tableFrom": "article_tags",
          "tableTo": "tags",
          "columnsFrom": [
            "tagId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "article_tags_id": {
          "name": "article_tags_id",
          "columns": [
            "id"
          ]
        }
      },
      "uniqueConstraints": {},
      "checkConstraint": {}
    },
    "articles": {
      "name": "articles",
      "columns": {
        "id": {
          "name": "id",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": true
        },
        "title": {
          "name": "title",
          "type": "varchar(512)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "url": {
          "name": "url",
          "type": "varchar(2048)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "source": {
          "name": "source",
          "type": "varchar(256)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "author": {
          "name": "author",
          "type": "varchar(256)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "fullText": {
          "name": "fullText",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "summary": {
          "name": "summary",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "keyInsights": {
          "name": "keyInsights",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "publicationDate": {
          "name": "publicationDate",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "importedAt": {
          "name": "importedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "onUpdate": true,
          "default": "(now())"
        },
        "isFavourite": {
          "name": "isFavourite",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": false
        },
        "wordCount": {
          "name": "wordCount",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": 0
        }
      },
      "indexes": {
        "articles_imported_at_idx": {
          "name": "articles_imported_at_idx",
          "columns": [
            "importedAt"
          ],
          "isUnique": false
        },
        "articles_source_idx": {
          "name": "articles_source_idx",
          "columns": [
            "source"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "articles_id": {
          "name": "articles_id",
          "columns": [
            "id"
          ]
        }
      },
      "uniqueConstraints": {},
      "checkConstraint": {}
    },
    "content_repurposing": {
      "name": "content_repurposing",
      "columns": {
        "id": {
          "name": "id",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": true
        },
        "articleId": {
          "name": "articleId",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "format": {
          "name": "format",
          "type": "enum('video_script','linkedin_post','instagram_caption','blog_post')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "enum('untouched','in_progress','done')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'untouched'"
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "draftId": {
          "name": "draftId",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "onUpdate": true,
          "default": "(now())"
        }
      },
      "indexes": {
        "content_repurposing_article_status_idx": {
          "name": "content_repurposing_article_status_idx",
          "columns": [
            "articleId",
            "status"
          ],
          "isUnique": false
        },
        "content_repurposing_article_updated_at_idx": {
          "name": "content_repurposing_article_updated_at_idx",
          "columns": [
            "articleId",
            "updatedAt"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "content_repurposing_article_id_fk": {
          "name": "content_repurposing_article_id_fk",
          "tableFrom": "content_repurposing",
          "tableTo": "articles",
          "columnsFrom": [
            "articleId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "content_repurposing_draft_id_fk": {
          "name": "content_repurposing_draft_id_fk",
          "tableFrom": "content_repurposing",
          "tableTo": "generated_drafts",
          "columnsFrom": [
            "draftId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "content_repurposing_id": {
          "name": "content_repurposing_id",
          "columns": [
            "id"
          ]
        }
      },
      "uniqueConstraints": {
        "content_repurposing_article_format_unique": {
          "name": "content_repurposing_article_format_unique",
          "columns": [
            "articleId",
            "format"
          ]
        }
      },
      "checkConstraint": {}
    },
    "generated_drafts": {
      "name": "generated_drafts",
      "columns": {
        "id": {
          "name": "id",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": true
        },
        "articleId": {
          "name": "articleId",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "format": {
          "name": "format",
          "type": "enum('video_script','linkedin_post','instagram_caption','blog_post')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "title": {
          "name": "title",
          "type": "varchar(512)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "angle": {
          "name": "angle",
          "type": "varchar(512)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        }
      },
      "indexes": {
        "generated_drafts_article_created_at_idx": {
          "name": "generated_drafts_article_created_at_idx",
          "columns": [
            "articleId",
            "createdAt"
          ],
          "isUnique": false
        },
        "generated_drafts_article_format_idx": {
          "name": "generated_drafts_article_format_idx",
          "columns": [
            "articleId",
            "format"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "generated_drafts_article_id_fk": {
          "name": "generated_drafts_article_id_fk",
          "tableFrom": "generated_drafts",
          "tableTo": "articles",
          "columnsFrom": [
            "articleId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "generated_drafts_id": {
          "name": "generated_drafts_id",
          "columns": [
            "id"
          ]
        }
      },
      "uniqueConstraints": {},
      "checkConstraint": {}
    },
    "ingest_log": {
      "name": "ingest_log",
      "columns": {
        "id": {
          "name": "id",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": true
        },
        "runAt": {
          "name": "runAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        },
        "status": {
          "name": "status",
          "type": "enum('success','partial','error')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "emailsFound": {
          "name": "emailsFound",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "emailsNew": {
          "name": "emailsNew",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "emailsSkipped": {
          "name": "emailsSkipped",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "errorMessage": {
          "name": "errorMessage",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "durationMs": {
          "name": "durationMs",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "ingest_log_id": {
          "name": "ingest_log_id",
          "columns": [
            "id"
          ]
        }
      },
      "uniqueConstraints": {},
      "checkConstraint": {}
    },
    "newsletter_sources": {
      "name": "newsletter_sources",
      "columns": {
        "id": {
          "name": "id",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": true
        },
        "name": {
          "name": "name",
          "type": "varchar(256)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "emailAddress": {
          "name": "emailAddress",
          "type": "varchar(320)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "isActive": {
          "name": "isActive",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": true
        },
        "lastIngestedAt": {
          "name": "lastIngestedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "totalIngested": {
          "name": "totalIngested",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "newsletter_sources_id": {
          "name": "newsletter_sources_id",
          "columns": [
            "id"
          ]
        }
      },
      "uniqueConstraints": {
        "newsletter_sources_emailAddress_unique": {
          "name": "newsletter_sources_emailAddress_unique",
          "columns": [
            "emailAddress"
          ]
        }
      },
      "checkConstraint": {}
    },
    "raw_emails": {
      "name": "raw_emails",
      "columns": {
        "id": {
          "name": "id",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": true
        },
        "subject": {
          "name": "subject",
          "type": "varchar(512)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "fromAddress": {
          "name": "fromAddress",
          "type": "varchar(320)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "fromName": {
          "name": "fromName",
          "type": "varchar(256)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "rawText": {
          "name": "rawText",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "rawHtml": {
          "name": "rawHtml",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "gmailMessageId": {
          "name": "gmailMessageId",
          "type": "varchar(128)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "gmailThreadId": {
          "name": "gmailThreadId",
          "type": "varchar(128)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "enum('pending','approved','discarded','error')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'pending'"
        },
        "errorMessage": {
          "name": "errorMessage",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "articleId": {
          "name": "articleId",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "receivedAt": {
          "name": "receivedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        },
        "processedAt": {
          "name": "processedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "raw_emails_status_received_at_idx": {
          "name": "raw_emails_status_received_at_idx",
          "columns": [
            "status",
            "receivedAt"
          ],
          "isUnique": false
        },
        "raw_emails_article_id_idx": {
          "name": "raw_emails_article_id_idx",
          "columns": [
            "articleId"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "raw_emails_article_id_fk": {
          "name": "raw_emails_article_id_fk",
          "tableFrom": "raw_emails",
          "tableTo": "articles",
          "columnsFrom": [
            "articleId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "raw_emails_id": {
          "name": "raw_emails_id",
          "columns": [
            "id"
          ]
        }
      },
      "uniqueConstraints": {},
      "checkConstraint": {}
    },
    "tags": {
      "name": "tags",
      "columns": {
        "id": {
          "name": "id",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": true
        },
        "name": {
          "name": "name",
          "type": "varchar(128)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "colour": {
          "name": "colour",
          "type": "varchar(32)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'#6366f1'"
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "tags_id": {
          "name": "tags_id",
          "columns": [
            "id"
          ]
        }
      },
      "uniqueConstraints": {
        "tags_name_unique": {
          "name": "tags_name_unique",
          "columns": [
            "name"
          ]
        }
      },
      "checkConstraint": {}
    },
    "users": {
      "name": "users",
      "columns": {
        "id": {
          "name": "id",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": true
        },
        "openId": {
          "name": "openId",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "email": {
          "name": "email",
          "type": "varchar(320)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "loginMethod": {
          "name": "loginMethod",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "role": {
          "name": "role",
          "type": "enum('user','admin')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'user'"
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "onUpdate": true,
          "default": "(now())"
        },
        "lastSignedIn": {
          "name": "lastSignedIn",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "users_id": {
          "name": "users_id",
          "columns": [
            "id"
          ]
        }
      },
      "uniqueConstraints": {
        "users_openId_unique": {
          "name": "users_openId_unique",
          "columns": [
            "openId"
          ]
        }
      },
      "checkConstraint": {}
    }
  },
  "views": {},
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  },
  "internal": {
    "tables": {},
    "indexes": {}
  }
}